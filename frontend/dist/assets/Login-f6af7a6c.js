import{l as h}from"./auth-b6d999c4.js";import{_ as w,r as t,o as y,c as b,a as m,b as o,w as r,d,t as V}from"./index-1e67ce6d.js";import"./request-db331112.js";const k={name:"Login",data(){return{form:{email:"",password:""},rules:{email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}]},loading:!1}},methods:{async handleLogin(){this.$refs.loginForm.validate(async p=>{var e,n;if(p){this.loading=!0;try{const l=await h(this.form);this.$store.commit("SET_USER",l.data),this.$message.success("登录成功"),this.$router.push("/profile")}catch(l){this.$message.error("登录失败："+(((n=(e=l.response)==null?void 0:e.data)==null?void 0:n.message)||l.message))}finally{this.loading=!1}}})}}},v={class:"login-container"},x={class:"login-form"},L={class:"form-links"};function C(p,e,n,l,s,_){const u=t("el-input"),i=t("el-form-item"),f=t("el-button"),c=t("el-form"),g=t("router-link");return y(),b("div",v,[m("div",x,[e[4]||(e[4]=m("h2",null,"用户登录",-1)),o(c,{model:s.form,rules:s.rules,ref:"loginForm"},{default:r(()=>[o(i,{prop:"email"},{default:r(()=>[o(u,{modelValue:s.form.email,"onUpdate:modelValue":e[0]||(e[0]=a=>s.form.email=a),placeholder:"请输入邮箱",size:"large","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),o(i,{prop:"password"},{default:r(()=>[o(u,{modelValue:s.form.password,"onUpdate:modelValue":e[1]||(e[1]=a=>s.form.password=a),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),o(i,null,{default:r(()=>[o(f,{type:"primary",size:"large",loading:s.loading,onClick:_.handleLogin,style:{width:"100%"}},{default:r(()=>[d(V(s.loading?"登录中...":"登录"),1)]),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["model","rules"]),m("div",L,[o(g,{to:"/register"},{default:r(()=>[...e[2]||(e[2]=[d("没有账号？去注册",-1)])]),_:1}),o(g,{to:"/reset-password"},{default:r(()=>[...e[3]||(e[3]=[d("忘记密码？",-1)])]),_:1})])])])}const N=w(k,[["render",C],["__scopeId","data-v-ab380346"]]);export{N as default};
