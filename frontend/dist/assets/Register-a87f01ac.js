import{r as w}from"./auth-b6d999c4.js";import{_ as V,r as m,o as h,c as y,a as d,b as s,w as t,d as p,t as v}from"./index-1e67ce6d.js";import"./request-db331112.js";const x={name:"Register",data(){return{form:{email:"",password:"",confirmPassword:"",first_name:"",last_name:""},rules:{email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(e,i,o)=>{i===""?o(new Error("请再次输入密码")):i!==this.form.password?o(new Error("两次输入密码不一致!")):o()},trigger:"blur"}],first_name:[{required:!0,message:"请输入名字",trigger:"blur"}],last_name:[{required:!0,message:"请输入姓氏",trigger:"blur"}]},loading:!1}},methods:{async handleRegister(){this.$refs.registerForm.validate(async u=>{var e,i;if(u){this.loading=!0;try{const o=await w(this.form);this.$store.commit("SET_USER",o.data),this.$message.success("注册成功"),this.$router.push("/profile")}catch(o){this.$message.error("注册失败："+(((i=(e=o.response)==null?void 0:e.data)==null?void 0:i.message)||o.message))}finally{this.loading=!1}}})}}},b={class:"register-container"},k={class:"register-form"},P={class:"name-group"},z={class:"form-links"};function R(u,e,i,o,r,f){const n=m("el-input"),a=m("el-form-item"),g=m("el-button"),_=m("el-form"),c=m("router-link");return h(),y("div",b,[d("div",k,[e[6]||(e[6]=d("h2",null,"用户注册",-1)),s(_,{model:r.form,rules:r.rules,ref:"registerForm"},{default:t(()=>[s(a,{prop:"email"},{default:t(()=>[s(n,{modelValue:r.form.email,"onUpdate:modelValue":e[0]||(e[0]=l=>r.form.email=l),placeholder:"请输入邮箱",size:"large","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),s(a,{prop:"password"},{default:t(()=>[s(n,{modelValue:r.form.password,"onUpdate:modelValue":e[1]||(e[1]=l=>r.form.password=l),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(a,{prop:"confirmPassword"},{default:t(()=>[s(n,{modelValue:r.form.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=l=>r.form.confirmPassword=l),type:"password",placeholder:"请确认密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),d("div",P,[s(a,{prop:"first_name",style:{flex:"1"}},{default:t(()=>[s(n,{modelValue:r.form.first_name,"onUpdate:modelValue":e[3]||(e[3]=l=>r.form.first_name=l),placeholder:"名字",size:"large"},null,8,["modelValue"])]),_:1}),s(a,{prop:"last_name",style:{flex:"1"}},{default:t(()=>[s(n,{modelValue:r.form.last_name,"onUpdate:modelValue":e[4]||(e[4]=l=>r.form.last_name=l),placeholder:"姓氏",size:"large"},null,8,["modelValue"])]),_:1})]),s(a,null,{default:t(()=>[s(g,{type:"primary",size:"large",loading:r.loading,onClick:f.handleRegister,style:{width:"100%"}},{default:t(()=>[p(v(r.loading?"注册中...":"注册"),1)]),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["model","rules"]),d("div",z,[s(c,{to:"/login"},{default:t(()=>[...e[5]||(e[5]=[p("已有账号？去登录",-1)])]),_:1})])])])}const C=V(x,[["render",R],["__scopeId","data-v-8dd02ecd"]]);export{C as default};
